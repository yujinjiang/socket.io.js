const express = require('express');
const multiparty = require('multiparty');
//console.log(multiparty);
const app = express();
app.use(express.static('public'));
app.post('/', function(req, res) {
    console.log('123');
    const form = new multiparty.Form({ uploadDir: './public/files/' });
    form.parse(req, (err, fields, files) => {
        var filesTmp = JSON.stringify(files, null, 2);
        var fieldTmp = JSON.stringify(fields, null, 2);
        console.log(filesTmp);
        console.log(fieldTmp);
        //  console.log(files);
        res.writeHead(200, {
            'content-type': 'text/plain;charset=utf-8',
            'Access-Control-Allow-Origin': '*',
            'Access-Control-Allow-Methods': 'PUT,POST,GET,DELETE,OPTIONS'
        });
        res.write('received upload:\n\n');
        res.end();
    });
});
app.get('/', (req, res) => {
    console.log('123');
    res.send('123');
})
app.listen(8080, function() {
    console.log('ok 8080');
});